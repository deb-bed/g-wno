<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zmiana danych</title>
    <style>
        /* Stylizacja pozostaje bez zmian */
    </style>
</head>
<body>

<h2>Zmiana danych</h2>

<form id="changeDataForm">
    <label for="name">Imię:</label>
    <input type="text" id="name" required>

    <label for="surname">Nazwisko:</label>
    <input type="text" id="surname" required>

    <label for="dob">Data urodzenia:</label>
    <input type="date" id="dob" required>

    <label for="pesel">PESEL:</label>
    <input type="text" id="pesel" required>

    <label for="adres">ADRES:</label>
    <input type='text' id="adres" required>

    <label for="postcode">KOD POCZTOWY:</label>
    <input id="postcode" placeholder="00-000" required>

    <label for="city">MIASTO:</label>
    <input type="text" id="city" required>

    <label for="data_zameldowania">DATA ZAMELDOWANIA:</label>
    <input type="date" id="data_zameldowania" required>

    <label for="last_update">OSTATNIA AKTUALIZACJA:</label>
    <input type="date" id="last_update" required>

    <Label for="series">SERIA I NUMER DOWODU:</Label>
    <input id="series" required>

    <label for="expire_date">DATA WAŻNOŚCI:</label>
    <input type="date" id="expire_date" required>

    <label for="data_wydania">DATA WYDANIA:</label>
    <input type="date" id="data_wydania" required>

    <label for="organ_wydajacy">ORGAN WYDAJĄCY:</label>
    <input id="organ_wydajacy" placeholder="PREZYDENT MIASTA ......" required>

    <label for="plec">Plec:</label>
    <input type="text" id="plec" placeholder="Kobieta/Mężczyzna" required>

    <label for="birth_location">MIEJSCE URODZENIA:</label>
    <input type="text" id="birth_location" required>

    <label for="dad_surname">NAZWISKO RODOWE OJCA:</label>
    <input type="text" id="dad_surname" required>

    <label for="mom_surname">NAZWISKO RODOWE MATKI:</label>
    <input type="text" id="mom_surname" required>

    <label for="mom_name">IMIĘ MATKI:</label>
    <input type="text" id="mom_name" required>

    <label for="dad_name">IMIĘ OJCA:</label>
    <input type="text" id="dad_name" required>

    <!-- Nowe pole do wyboru pliku -->
    <label for="photoFile">Zdjęcie (Wybierz plik):</label>
    <input type="file" id="photoFile" class="file-input" accept="image/*">

    <!-- Podgląd zdjęcia -->
    <img id="photo-preview" alt="Podgląd zdjęcia">

    <button type="submit">Generuj</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('changeDataForm');
        const photoFileInput = document.getElementById('photoFile');
        const photoPreview = document.getElementById('photo-preview');

        // Zapisanie danych z formularza
        form.addEventListener('submit', function (e) {
            e.preventDefault();

            const data = {
                name: document.getElementById('name').value,
                surname: document.getElementById('surname').value,
                dob: document.getElementById('dob').value,
                pesel: document.getElementById('pesel').value,
                adres: document.getElementById('adres').value,
                postcode: document.getElementById('postcode').value,
                city: document.getElementById('city').value,
                data_zameldowania: document.getElementById('data_zameldowania').value,
                last_update: document.getElementById('last_update').value,
                series: document.getElementById('series').value,
                expire_date: document.getElementById('expire_date').value,
                data_wydania: document.getElementById('data_wydania').value,
                organ_wydajacy: document.getElementById('organ_wydajacy').value,
                plec: document.getElementById('plec').value,
                birth_location: document.getElementById('birth_location').value,
                dad_surname: document.getElementById('dad_surname').value,
                mom_surname: document.getElementById('mom_surname').value,
                dad_name: document.getElementById('dad_name').value,
                mom_name: document.getElementById('mom_name').value,
                photo: photoPreview.src
            };

            try {
                // Zapisanie danych w localStorage
                localStorage.setItem('userData', JSON.stringify(data));

                // Przekierowanie na stronę id.html
                window.location.href = 'id.html';
            } catch (error) {
                alert('Błąd przy zapisie danych.');
            }
        });

        // Podgląd zdjęcia
        photoFileInput.addEventListener('change', function () {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    photoPreview.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });
    });
</script>

</body>
</html>
